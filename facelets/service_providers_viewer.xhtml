<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ws="http://xmlns.idega.com/com.idega.workspace">
	<link
		rel="stylesheet"
		type="text/css"
		href="#{iwResourceResolver['com.idega.xroad.client']['style/serviceProviders.css']}"/>
	<link
		rel="stylesheet"
		type="text/css"
		href="#{iwResourceResolver['com.idega.core']['style/iw_core.css']}"/>
	<link
		rel="stylesheet"
		type="text/css"
		href="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/fancybox.css']}"/>
	<script
		type="text/javascript"
		src="http://code.jquery.com/jquery-latest.min.js"/>
	<script
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.core']['iw_core.js']}"/>
	<script
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/fancybox.js']}"/>
	<script
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/jquery-plugins/jquery.easing.js']}"/>
	<script
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/helpers/jquery.fancybox-media.js']}"/>
	<script
		type="text/javascript"
		src="#{iwResourceResolver['com.idega.xroad.client']['javascript/serviceProvidersViewerHelper.js']}"/>
	<script 
		type="text/javascript">
		jQuery(".windowLink").fancybox({
			type:		"iframe",
			autoSize:	false,
			beforeShow:	function () {
				var iframe = jQuery(".fancybox-iframe");
				if (iframe != null) {
					this.height = jQuery(iframe).contents().find('table.editorTable').height() + 20;
					this.width = jQuery(iframe).contents().find('table.editorTable').width() + 25;
	
					jQuery(iframe).load(function() {
						var saved = jQuery(this).contents().find(".savedText");
						if (saved != null) {
							parent.jQuery.fancybox.close();
	
							// On Firefox uncheck edit -> preferences -> advanced -> Tell me when a website...
							parent.location.reload(true);
						}
					});
				}
			}
		});
	</script>
	<ws:page
		id="providers"
		showFunctionMenu="true"
		embedForm="true">
		<h:form>
			<div
				class="tableDiv">
				<h:dataTable
					id="serviceProvidersTable"
					value="#{serviceProviderViewerBean.serviceProviders}"
					var="bean"
					styleClass="table"
					rowClasses="tableRow">
					<h:column>
						<h:inputHidden
							id="providerId"
							value="#{bean.id}"/>
					</h:column>
					<h:column>
						<f:facet
							name="header">
							<h:panelGroup
								layout="block"
								styleClass="header">
								<h:outputText
									value="#{localizedStrings['com.idega.xroad.client']['provider_id']}"/>
							</h:panelGroup>
						</f:facet>
						<h:outputText
							value="#{bean.providerId}"/>
					</h:column>
					<h:column>
						<f:facet
							name="header">
							<h:panelGroup
								layout="block"
								styleClass="header">
								<h:outputText
									value="#{localizedStrings['com.idega.xroad.client']['name']}"/>
							</h:panelGroup>
						</f:facet>
						<h:outputText
							value="#{bean.name}"/>
					</h:column>
					<h:column>
						<f:facet
							name="header">
							<h:panelGroup
								layout="block"
								styleClass="header">
								<h:outputText
									value="#{localizedStrings['com.idega.xroad.client']['url']}"/>
							</h:panelGroup>
						</f:facet>
						<h:outputText
							value="#{bean.url}"/>
					</h:column>
					<h:column>
						<f:facet
							name="header">
							<h:panelGroup
								layout="block"
								styleClass="header">
								<h:outputText
									value="#{localizedStrings['com.idega.xroad.client']['edit']}"/>
							</h:panelGroup>
						</f:facet>
						<h:panelGroup
							layout="block">
							<h:outputLink
								styleClass="windowLink"
								value="#{bean.editorLink}">
								<h:graphicImage
									value="#{iwResourceResolver['com.idega.xroad.client']['style/images/edit.png']}"
									alt="#{localizedStrings['com.idega.xroad.client']['edit']}"/>
							</h:outputLink>
						</h:panelGroup>
					</h:column>
					<h:column>
						<f:facet 
							name="header">
							<h:panelGroup
								layout="block"
								styleClass="header">
								<h:outputText
									value="#{localizedStrings['com.idega.xroad.client']['delete']}"/>
							</h:panelGroup>
						</f:facet>
						<h:panelGroup
							layout="block">
							<h:graphicImage
								url="#{iwResourceResolver['com.idega.xroad.client']['style/images/delete.png']}"
								onclick="ServiceProvidersViewerHelper.remove(this.parentNode.parentNode)"
								alt="#{localizedStrings['com.idega.xroad.client']['delete']}"/>
						</h:panelGroup>
					</h:column>
				</h:dataTable>
				<h:panelGroup
					layout="block">
					<h:outputLink
						styleClass="homepageLink"
						value="#{serviceProviderViewerBean.homepageLink}">
						<input
							value="#{localizedStrings['com.idega.xroad.client']['back']}"
							type="button"/>
					</h:outputLink>
					<h:outputLink
						styleClass="windowLink"
						value="#{serviceProviderViewerBean.editorLink}">
						<input
							value="#{localizedStrings['com.idega.xroad.client']['add']}"
							type="button"/>
					</h:outputLink>
				</h:panelGroup>
			</div>
		</h:form>
	</ws:page>
</div>